<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" version="1.1" viewBox="0 0 1700 500"><title>DOM3 Events Key Event Flow Model</title><desc>schepers, 20-03-2008</desc><g id="graph0" fill="#dcdcdc" stroke="#000" stroke-width="2" class="graph" font-family="Verdana, Arial" font-size="14"><defs><marker id="blackArrow" markerHeight="30" markerUnits="userSpaceOnUse" markerWidth="15" orient="auto" refX="0" refY="0" viewBox="-13 -6 15 12"><path fill="#000" stroke="none" stroke-linecap="round" stroke-linejoin="round" d="M-10,-6 L0,0 -10,6 Z"/></marker><marker id="redArrow" markerHeight="30" markerUnits="userSpaceOnUse" markerWidth="15" orient="auto" refX="0" refY="0" viewBox="-13 -6 15 12"><path fill="red" stroke="none" stroke-linecap="round" stroke-linejoin="round" d="M-10,-6 L0,0 -10,6 Z"/></marker><marker id="greenArrow" markerHeight="30" markerUnits="userSpaceOnUse" markerWidth="15" orient="auto" refX="0" refY="0" viewBox="-13 -6 15 12"><path fill="#0f0" stroke="none" stroke-linecap="round" stroke-linejoin="round" d="M-10,-6 L0,0 -10,6 Z"/></marker></defs><g id="edges" fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path marker-end="url(#blackArrow)" d="M140,60 H190"><title>No Key Events to Keydown</title></path><path marker-end="url(#blackArrow)" d="M310,60 H360"><title>Keydown to Keypress</title></path><path marker-end="url(#blackArrow)" d="M420,60 H625"><title>Keypress to Input Method Editor</title></path><path stroke="#0f0" marker-end="url(#greenArrow)" d="M755,60 H1065"><title>Input Method Editor to Combination of Keys</title></path><path marker-end="url(#blackArrow)" d="M1185,60 H1500"><title>Combination of Keys to Keyup</title></path><path marker-end="url(#blackArrow)" d="M1560,85 V520"><title>Keyup to textInput</title></path><path stroke="#0f0" marker-end="url(#greenArrow)" d="M600,260 V520"><title>Character Key to textInput</title></path><path stroke="#0f0" marker-end="url(#greenArrow)" d="M1385,420 V520"><title>Character Key to textInput</title></path><path stroke="red" marker-end="url(#redArrow)" d="M690,100 V200 Q690,220 670,220 H665"><title>Input Method Editor to Character Key</title></path><path stroke="red" marker-end="url(#redArrow)" d="M690,100 V200 Q690,220 710,220 H715"><title>Input Method Editor to Sustained</title></path><path stroke="#0f0" marker-end="url(#greenArrow)" d="M845,220 H895"><title>Sustained to Delay</title></path><path stroke="red" marker-end="url(#redArrow)" d="M780,240 V355"><title>Sustained to keyup</title></path><path marker-end="url(#blackArrow)" d="M1005,220 H1065"><title>Delay to keylongpress</title></path><path marker-end="url(#blackArrow)" d="M1185,220 H1235"><title>keylongpress to keypress</title></path><path marker-end="url(#blackArrow)" d="M1295,245 V360 Q1295,380 1275,380 H1270"><title>keypress to Sustained</title></path><path marker-end="url(#blackArrow)" d="M1295,245 V360 Q1295,380 1315,380 H1320"><title>keypress to Character Key</title></path><path stroke="#0f0" marker-end="url(#greenArrow)" d="M1205,340 V255 Q1205,235 1225,235 H1235"><title>Sustained to keypress</title></path><path stroke="red" marker-end="url(#redArrow)" d="M535,220 H485"><title>Character Key to Modifier Key</title></path><path stroke="#0f0" marker-end="url(#greenArrow)" d="M355,220 H314"><title>Modifier Key to Wait for Keys</title></path><path marker-end="url(#blackArrow)" d="M250,191 V85"><title>Wait for Keys to keydown</title></path><path stroke="red" marker-end="url(#redArrow)" d="M1140,380 H840"><title>Sustained to keyup</title></path></g><g id="nokey" class="node" transform="translate(20,35)"><title>No Key Events</title><ellipse cx="60" cy="24" fill="#000" rx="60" ry="25"/><text x="60" y="22" fill="#fff" stroke="none" text-anchor="middle">no key <tspan x="60" y="38" fill="#fff" stroke="none" font-family="Verdana, Arial" text-anchor="middle">activity</tspan></text></g><g id="keydownEvent" class="node" transform="translate(190,35)"><title>keydown Event</title><polygon points="0 0 120 0 120 50 0 50"/><text x="60" y="29" fill="#000" stroke="none" text-anchor="middle">keydown</text></g><g id="keypressEvent" class="node" transform="translate(360,35)"><title>keypress Event</title><polygon points="0 0 120 0 120 50 0 50"/><text x="60" y="29" fill="#000" stroke="none" text-anchor="middle">keypress</text></g><g id="IME" class="node" transform="translate(625,20)"><title>IME Operation Decision</title><polygon points="65 0 130 40 65 80 0 40"/><text x="65" y="31" fill="#000" stroke="none" text-anchor="middle">input <tspan x="65" y="45" font-family="Verdana, Arial" text-anchor="middle">message</tspan> <tspan x="65" y="60" font-family="Verdana, Arial" text-anchor="middle">editor?</tspan></text></g><g id="keycombo" class="node" transform="translate(1065,35)"><title>Combination of Key Event</title><polygon fill="#fff" stroke-width="1" points="0 0 290 0 290 50 0 50"/><polygon points="4 4 286 4 286 46 4 46"/><text x="145" y="29" fill="#000" stroke="none" text-anchor="middle">combination of keys</text></g><g id="isSustained" class="node" transform="translate(715,180)"><title>Sustained Keypress Decision</title><polygon points="65 0 130 40 65 80 0 40"/><text x="65" y="45" fill="#000" stroke="none" text-anchor="middle">Sustained?</text></g><g id="isCharKey0" class="node" transform="translate(535,180)"><title>Character Key Decision</title><polygon points="65 0 130 40 65 80 0 40"/><text x="65" y="38" fill="#000" stroke="none" text-anchor="middle">character <tspan x="65" y="54" fill="#000" stroke="none" font-family="Verdana, Arial" text-anchor="middle">key?</tspan></text></g><g id="textInput0" class="node" transform="translate(535,520)"><title>textInput</title><polygon points="24 0 120 0 96 48 0 48"/><text x="60" y="29" fill="#000" stroke="none" text-anchor="middle">textInput</text></g><g id="isModKey0" class="node" transform="translate(355,180)"><title>Modifier Key Decision</title><polygon points="65 0 130 40 65 80 0 40"/><text x="65" y="38" fill="#000" stroke="none" text-anchor="middle">modifier <tspan x="65" y="54" fill="#000" stroke="none" font-family="Verdana, Arial" text-anchor="middle">key?</tspan></text></g><g id="wait" class="node" transform="translate(190,195)"><title>Wait for More Key-Events</title><ellipse cx="60" cy="24" fill="#fff" stroke-width="1" rx="64" ry="28"/><ellipse cx="60" cy="24" rx="60" ry="24"/><text x="60" y="22" fill="#000" stroke="none" text-anchor="middle">wait for <tspan x="60" y="38" fill="#000" stroke="none" font-family="Verdana, Arial" text-anchor="middle">more keys</tspan></text></g><g id="delay" class="node" transform="translate(895,195)"><title>delay</title><path d="M0,0 H90 C120,0 120,48 90,48 H0 Z"/><text x="60" y="29" fill="#000" stroke="none" text-anchor="middle">delay</text></g><g id="keylongpressEvent" class="node" transform="translate(1065,195)"><title>keylongpress Event</title><polygon points="0 0 120 0 120 50 0 50"/><text x="60" y="29" fill="#000" stroke="none" text-anchor="middle">keylongpress</text></g><g id="keypressEvent" class="node" transform="translate(1235,195)"><title>keypress Event</title><polygon points="0 0 120 0 120 50 0 50"/><text x="60" y="29" fill="#000" stroke="none" text-anchor="middle">keypress</text></g><g id="isSustained" class="node" transform="translate(1140,340)"><title>Sustained Keypress Decision</title><polygon points="65 0 130 40 65 80 0 40"/><text x="65" y="45" fill="#000" stroke="none" text-anchor="middle">Sustained?</text></g><g id="isCharKey0" class="node" transform="translate(1320,340)"><title>Character Key Decision</title><polygon points="65 0 130 40 65 80 0 40"/><text x="65" y="38" fill="#000" stroke="none" text-anchor="middle">character <tspan x="65" y="54" fill="#000" stroke="none" font-family="Verdana, Arial" text-anchor="middle">key?</tspan></text></g><g id="textInput0" class="node" transform="translate(1320,520)"><title>textInput</title><polygon points="24 0 120 0 96 48 0 48"/><text x="60" y="29" fill="#000" stroke="none" text-anchor="middle">textInput</text></g><g id="keyupEvent" class="node" transform="translate(720,355)"><title>keyup Event</title><polygon points="0 0 120 0 120 50 0 50"/><text x="60" y="29" fill="#000" stroke="none" text-anchor="middle">keyup</text></g><g id="keyupEvent" class="node" transform="translate(1500,35)"><title>keyup Event</title><polygon points="0 0 120 0 120 50 0 50"/><text x="60" y="29" fill="#000" stroke="none" text-anchor="middle">keyup</text></g><g id="textInput0" class="node" transform="translate(1500,520)"><title>textInput</title><polygon points="24 0 120 0 96 48 0 48"/><text x="60" y="29" fill="#000" stroke="none" text-anchor="middle">textInput</text></g><g id="noIME" class="node" transform="translate(525,495)"><title>textInput without IME</title><rect width="935" height="120" x="0" y="0" fill="none" stroke="gray" stroke-dasharray="5" stroke-linecap="round" rx="10" ry="10"/><text x="467.5" y="110" fill="#000" stroke="none" text-anchor="middle">textInput without IME</text></g><g id="repeat" class="node" transform="translate(1310,505)"><title>textInput repeat property</title><rect width="140" height="90" x="0" y="0" fill="none" stroke="gray" stroke-dasharray="5" stroke-linecap="round" rx="10" ry="10"/><text x="70" y="80" fill="#000" stroke="none" text-anchor="middle">repeat=&quot;true&quot;</text></g></g></svg>